<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SuperStrikeUltamate</title>
  <link rel="stylesheet" href="style.css?v=20251005-3">
  <style>
    /* Hard overrides to ensure Character Select fits without zoom */
    #chars .w1100{ max-width:100% !important; width:100% !important }
    #chars .grid.two-col{ grid-template-columns:1fr !important }
    #chars .grid.auto{ grid-template-columns:repeat(auto-fit,minmax(120px,1fr)) !important; gap:8px !important }

    /* Always align screens to top and prevent horizontal overflow */
    .screen{ max-width:100vw; padding:12px }
    .screen.center{ align-items:flex-start !important; justify-content:center }
    html,body{ overflow-x:hidden }

    /* Force game layout to stack and scale */
    #gameScreen .row.gap{ flex-direction:column !important; align-items:center }
    #game{ width:100% !important; height:auto !important; max-width:1100px }
  </style>
</head>
<body>
  <!-- TITLE -->
  <section id="title" class="screen center">
    <div class="stack center">
      <h1 class="logo">SuperStrikeUltimate</h1>
      <p class="muted">Best Game in the World Made by Cameron James Keft and Dhruv Bajaj</p>
      <button id="btnStart" class="primary xl">PRESS ANY BUTTON</button>
      <div class="tips muted">Keyboard only. No assets/downloads required.</div>
    </div>
  </section>

  <!-- MAIN MENU -->
  <section id="main" class="screen center hidden">
    <div class="grid main-grid">
      <div class="card grid">
        <button id="gotoSmash" class="menu red">Smash</button>
        <div class="row two">
          <button id="gotoModes" class="menu blue">Games &amp; More</button>
          <button id="gotoVault" class="menu pink">Vault</button>
        </div>
      </div>
      <div class="grid">
        <button id="gotoOnline" class="menu gold">Online</button>
        <button id="gotoTrainingShortcut" class="menu green">Training</button>
      </div>
    </div>
  </section>

  <!-- ONLINE -->
  <section id="online" class="screen center hidden">
    <div class="card w900">
      <h2>Online</h2>
      <div class="row gap">
        <input id="onlineName" type="text" placeholder="Name (optional)">
      </div>
      <div class="grid two-col gap">
        <div class="panel">
          <h3>Room Code</h3>
          <div class="row gap">
            <button id="btnCreateRoom" class="primary">Create Room</button>
          </div>
          <div class="row gap mt">
            <input id="roomCodeInput" type="text" placeholder="Enter Code" style="text-transform:uppercase">
            <button id="btnJoinRoom">Join</button>
          </div>
        </div>
        <div class="panel">
          <h3>Random Match</h3>
          <button id="btnRandom" class="gold">Find Match</button>
          <div class="muted small mt">Pairs you with another player automatically.</div>
        </div>
      </div>
      <div class="panel mt">
        <div id="onlineStatus" class="muted">Not connected.</div>
        <div class="row space mt">
          <button id="onlineBack" class="ghost">Back</button>
          <button id="onlineGoSelect" class="primary" disabled>Go to Character Select</button>
        </div>
      </div>
    </div>
  </section>

  <!-- MODE SELECT -->
  <section id="modes" class="screen center hidden">
    <div class="card w900">
      <div class="row space">
        <h2>Choose Mode</h2>
        <div id="modeBadge" class="pill">—</div>
      </div>
      <div class="row wrap gap">
        <button class="mode-btn red" data-mode="stock">Stock Battle</button>
        <button class="mode-btn green" data-mode="training">Training</button>
        <button class="mode-btn blue" data-mode="timed">Timed (KOs - Falls)</button>
      </div>
      <div class="sub muted">Tip: Use the Rules to customize stocks, items, CPU level, and more.</div>
      <div class="row space mt">
        <button class="ghost" id="backMain1">Back</button>
        <button class="primary" id="configureRules">Rules</button>
      </div>
    </div>
  </section>

  <!-- RULES -->
  <section id="rules" class="screen center hidden">
    <div class="card w900">
      <h2>Rules</h2>
      <div class="grid two-col gap">
        <div class="panel">
          <h3>Win Conditions</h3>
          <label>Stocks
            <input id="ruleStocks" type="number" min="1" max="10" value="3">
          </label>
          <label>Time Limit (min, 0 = none)
            <input id="ruleTime" type="number" min="0" max="30" value="0">
          </label>
          <label>Damage Ratio (0.5–2.0)
            <input id="ruleRatio" type="number" min="0.5" step="0.1" max="2.0" value="1.0">
          </label>
        </div>
        <div class="panel">
          <h3>Items</h3>
          <label><input id="ruleItemsOn" type="checkbox" checked> Enable Items</label>
          <label>Item Frequency (secs)
            <input id="ruleItemFreq" type="number" min="2" max="20" value="8">
          </label>
          <div class="muted">Use Training to spawn items manually.</div>
        </div>
        <div class="panel">
          <h3>CPU</h3>
          <label>CPU Level (0: Human)
            <input id="ruleCpuLevel" type="number" min="0" max="9" value="1">
          </label>
        </div>
        <div class="panel">
          <h3>Quality of Life</h3>
          <label><input id="ruleScreenShake" type="checkbox" checked> Screen Shake on KO</label>
          <label><input id="ruleHitSparks" type="checkbox" checked> Hit Sparks</label>
        </div>
      </div>
      <div class="row space mt">
        <button class="ghost" id="backModes">Back</button>
        <button class="primary" id="rulesConfirm">Done</button>
      </div>
    </div>
  </section>

  <!-- CHARACTER SELECT -->
  <section id="chars" class="screen center hidden">
    <div class="card w1100">
      <div class="row space">
        <h2>Select Fighters</h2>
        <div class="pill" id="modeLabel">—</div>
      </div>
      <div class="row gap" id="charToggles" style="margin-bottom:8px">
        <button id="viewP1" class="ghost">P1</button>
        <button id="viewP2" class="ghost">P2</button>
      </div>
      <div class="grid two-col gap">
        <div id="p1Col">
          <div class="muted">Player 1</div>
          <div id="p1Chars" class="grid auto"></div>
          <div id="p1Alts" class="row wrap gap mt"></div>
        </div>
        <div id="p2Col">
          <div class="muted">Player 2</div>
          <div style="display:flex;align-items:center;gap:12px;margin-bottom:6px">
            <label style="font-size:0.9rem"><input type="checkbox" id="p2Cpu" checked> CPU</label>
            <label style="font-size:0.9rem">Level
              <input type="number" id="p2CpuLevel" min="1" max="9" value="1" style="width:60px">
            </label>
          </div>
          <div id="p2Chars" class="grid auto"></div>
          <div id="p2Alts" class="row wrap gap mt"></div>
        </div>
      </div>
      <div class="row space mt">
        <div class="row gap">
          <button class="ghost" id="charsBack">Back</button>
        </div>
        <div class="row gap">
          <button class="ghost" id="openMusic">Music</button>
          <button class="ghost" id="openStage">Stage</button>
          <button id="charsReady" class="primary">Ready!</button>
        </div>
      </div>
    </div>
  </section>

  <!-- STAGE SELECT -->
  <section id="stages" class="screen center hidden">
    <div class="card w900">
      <h2>Choose Stage</h2>
      <div id="stageGrid" class="grid auto"></div>
      <div class="row space mt">
        <button class="ghost" id="stagesBack">Back</button>
        <button class="primary" id="stagesConfirm">Confirm</button>
      </div>
    </div>
  </section>

  <!-- MUSIC SELECT -->
  <section id="music" class="screen center hidden">
    <div class="card w900">
      <h2>Music</h2>
      <p class="muted">Procedural tracks via WebAudio.</p>
      <div id="musicGrid" class="grid auto"></div>
      <div class="row space mt">
        <button class="ghost" id="musicBack">Back</button>
        <button class="primary" id="musicConfirm">Use Track</button>
      </div>
    </div>
  </section>

  <!-- GAME -->
  <section id="gameScreen" class="screen column center hidden">
    <div class="row gap">
      <canvas id="game" width="1100" height="620"></canvas>
      <div class="card side">
        <h3>Controls</h3>
        <div class="small">
          <b>P1</b> WASD move/jump/fastfall, J attack, K special, L shield, H pick/drop, U use item, <b>O FS</b>.
        </div>
        <div class="small mt4">
          <b>P2</b> Arrows/0 jump/fastfall, 1 attack, 2 special, 3 shield, . pick/drop, <b>9 FS</b>.
        </div>
        <div class="pill mt">Enter: Pause</div>
        <div class="muted small mt4">Training: press I to open the Spawn Item menu.</div>
      </div>
    </div>
    <div id="hud" class="hud">
      <div class="top">
        <div id="hudP1" class="hudcol left"></div>
        <div id="hudTimer" class="pill">—</div>
        <div id="hudP2" class="hudcol right"></div>
      </div>
      <div id="pause" class="pause hidden">
        <div class="panel">
          <h3>Paused</h3>
          <div class="stack gap">
            <button id="resume">Resume</button>
            <button id="spawnItem" class="ghost">Spawn Item (Training)</button>
            <button id="endBattle" class="ghost">End Battle</button>
          </div>
        </div>
      </div>
      <div id="countdown" class="pause hidden">
        <div class="panel">
          <h1 id="countdownText">3</h1>
        </div>
      </div>
      <div id="results" class="pause hidden">
        <div class="panel">
          <h2 id="resultTitle">Game!</h2>
          <div id="resultStats" class="grid two-col gap mt"></div>
          <div class="row space mt">
            <button id="again" class="primary">Runback</button>
            <button id="toSelect" class="ghost">Character Select</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script src="game.js?v=4"></script>
</body>
</html>
